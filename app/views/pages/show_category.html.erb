<div class="preload">
  <p class="center"><%= image_tag("loader.gif", :alt=>"レシピ読み込み中") %><br /></p>
</div>

<!-- Specific CSS for the example -->
<style>
  /**
   * Grid items
   */
  #tiles li {
    -moz-box-sizing: border-box;
         box-sizing: border-box;
  }

  #tiles li img {
    width: 100%;
    height: auto;
  }
</style>

<div id="wrapper">
  <div id="main" role="main">
    <ul id="tiles">
    <% @recipes.each do |recipe| %>
    <li>
      <%= link_to image_tag(recipe.image_ulr), recipe.ulr, :target=>["_blank"] %>
      <p>
        <%= recipe.title %><br />
        [レシポイント] <%= recipe.num_tsukurepo %><br />
      </p>
    </li>
    <% end %>
    </ul>
  </div>
</div>

<!-- Javascripts
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<%= yield(:page_javascript) if content_for?(:page_javascript) %>
<%= javascript_include_tag "application" %>
<script type="text/javascript">
  (function ($){
    $('#tiles').imagesLoaded(function() {
      // Prepare layout options.
      var options = {
        itemWidth: 200, // Optional min width of a grid item
        autoResize: true, // This will auto-update the layout when the browser window is resized.
        container: $('#tiles'), // Optional, used for some extra CSS styling
        offset: 5, // Optional, the distance between grid items
        outerOffset: 20, // Optional the distance from grid to parent
        flexibleWidth: '50%' // Optional, the maximum width of a grid item
      };

      // Get a reference to your grid items.
      var handler = $('#tiles li');

      var $window = $(window);
      $window.resize(function() {
        var windowWidth = $window.width(),
            newOptions = { flexibleWidth: '50%' };

        // Breakpoint
        if (windowWidth < 1024) {
          newOptions.flexibleWidth = '100%';
        }

        handler.wookmark(newOptions);
      });

      $(document).ready(function()
      {
         $(".preload").fadeOut();
      });

      // Call the layout function.
      handler.wookmark(options);
    });
  })(jQuery);
</script>